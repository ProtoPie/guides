/*
Copyright (c) 2019 Daybrush
name: @scena/guides
license: MIT
author: Protopie
repository: git+https://github.com/ProtoPie/guides.git
version: 0.18.1
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Guides=e()}(this,function(){"use strict";var N=function(t,e){return(N=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)};function r(t,e){function n(){this.constructor=t}N(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var g=function(){return(g=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function m(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var Y="function",n="string",X="undefined",A=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],z=1e-7,i={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,e){return t*e/100},vw:function(t,e){return t/100*(e=void 0===e?window.innerWidth:e)},vh:function(t,e){return t/100*(e=void 0===e?window.innerHeight:e)},vmax:function(t,e){return t/100*(e=void 0===e?Math.max(window.innerWidth,window.innerHeight):e)},vmin:function(t,e){return t/100*(e=void 0===e?Math.min(window.innerWidth,window.innerHeight):e)}};function o(t){return t&&"object"==typeof t}function L(t){return Array.isArray(t)}function y(t){return typeof t===n}function $(t,e,n,r,i){if(b(t,e,n))return n;for(var o,s=t,a=e,u=r,c=i,l=n+1;l<u;++l){var f=function(t){var e,n,r=a[t].trim();return r!==s.close||b(s,a,t)?(e=t,-1===(e=(n=E(c,function(t){return t.open===r}))?$(n,a,t,u,c):e)?(o=t,"break"):void(o=t=e)):{value:t}}(l);if(l=o,"object"==typeof f)return f.value;if("break"===f)break}return-1}function b(t,e,n){return t.ignore?(e=e.slice(Math.max(n-3,0),n+3).join(""),new RegExp(t.ignore).exec(e)):null}function _(o,t){var t=y(t)?{separator:t}:t,e=t.separator,s=void 0===e?",":e,a=t.isSeparateFirst,u=t.isSeparateOnlyOpenClose,e=t.isSeparateOpenClose,c=void 0===e?u:e,e=t.openCloseCharacters,l=void 0===e?A:e,t=l.map(function(t){var e=t.open,t=t.close;return e===t?e:e+"|"+t}).join("|"),e=new RegExp("(\\s*"+s+"\\s*|"+t+"|\\s+)","g"),f=o.split(e).filter(Boolean),h=f.length,d=[],p=[];function v(){return p.length&&(d.push(p.join("")),p=[])}for(var g,n=function(t){var e=f[t].trim(),n=t,r=E(l,function(t){return t.open===e}),i=E(l,function(t){return t.close===e});if(r){if(-1!==(n=$(r,f,t,h,l))&&c)return v()&&a||(d.push(f.slice(t,n+1).join("")),t=n,a)?(g=t,"break"):(g=t,"continue")}else{if(i&&!b(i,f,t))return(r=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}(l)).splice(l.indexOf(i),1),{value:_(o,{separator:s,isSeparateFirst:a,isSeparateOnlyOpenClose:u,isSeparateOpenClose:c,openCloseCharacters:r})};if(i=e,!((""!==(r=s)&&" "!=r||""!==i&&" "!=i)&&i!==r||u))return v(),a?(g=t,"break"):(g=t,"continue")}p.push(f.slice(t,(n=-1===n?h-1:n)+1).join("")),g=t=n},r=0;r<h;++r){var i=n(r),r=g;if("object"==typeof i)return i.value;if("break"===i)break}return p.length&&d.push(p.join("")),d}function u(t){return _(t,",")}function I(t){var e,n,t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);return t?(e=t[1],n=t[2],{prefix:e,unit:t[3],value:parseFloat(n)}):{prefix:"",unit:"",value:NaN}}function x(t,r){return void 0===r&&(r="-"),t.replace(/([a-z])([A-Z])/g,function(t,e,n){return""+e+r+n.toLowerCase()})}function H(){return Date.now?Date.now():(new Date).getTime()}function U(t,e,n){void 0===n&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function E(t,e,n){e=U(t,e);return-1<e?t[e]:n}function R(t,e){var t=I(t),n=t.value,t=t.unit;if(o(e)){var r=e[t];if(r){if(typeof r===Y)return r(n);if(i[t])return i[t](n,r)}}else if("%"===t)return n*e/100;return i[t]?i[t](n):n}function F(t,e){var n;return e?(n=1/e,Math.round(t/e)/n):t}function p(t,e,n,r){t.addEventListener(e,n,r)}function v(t,e,n,r){t.removeEventListener(e,n,r)}var W=function(){return(W=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var B=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(o(t))for(var n in t)this.on(n,t[n]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(o(t))for(var n in t)this.off(n);else{var r,i;e?(r=this._events[t])&&-1<(i=U(r,function(t){return t.listener===e}))&&r.splice(i,1):this._events[t]=[]}else this._events={};return this},e.once=function(e,t){var n=this;return t&&this._addEvent(e,t,{once:!0}),new Promise(function(t){n._addEvent(e,t,{once:!0})})},e.emit=function(e,n){var t,r=this,i=(void 0===n&&(n={}),this._events[e]);return!e||!i||(t=!1,n.eventType=e,n.stop=function(){t=!0},n.currentTarget=this,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}(i).forEach(function(t){t.listener(n),t.once&&r.off(e,t.listener)}),!t)},e.trigger=function(t,e){return this.emit(t,e=void 0===e?{}:e)},e._addEvent=function(t,e,n){var r=this._events;r[t]=r[t]||[],r[t].push(W({listener:e},n))},t}();function h(e,n){return function(t){t&&(e[n]=t)}}function V(n,r){return function(t){var e=t.prototype;n.forEach(function(t){r(e,t)})}}var Z=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var n=this.keys,r=this.values,i=n.indexOf(t),i=-1===i?n.length:i;n[i]=t,r[i]=e},t}(),q=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),J="function"==typeof Map,K=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}();var Q=function(){function t(t,e,n,r,i,o,s,a){this.prevList=t,this.list=e,this.added=n,this.removed=r,this.changed=i,this.maintained=o,this.changedBeforeAdded=s,this.fixed=a}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){t=this.changedBeforeAdded,n=this.fixed,i=[],o=[],t.forEach(function(t){var e=t[0],t=t[1],n=new K;o[t]=i[e]=n}),i.forEach(function(t,e){t.connect(i[e-1])});var n,i,o,t=t.filter(function(t,e){return!n[e]}).map(function(t,e){var n,r=t[0],t=t[1];return r===t?[0,0]:(t=o[t-1],n=(r=i[r]).getIndex(),r.disconnect(),t?r.connect(t,t.next):r.connect(void 0,i[0]),[n,r.getIndex()])}),s=this.changed,a=[];this.cacheOrdered=t.filter(function(t,e){var n=t[0],t=t[1],e=s[e],r=e[0],e=e[1];if(n!==t)return a.push([r,e]),!0}),this.cachePureChanged=a},t}();function tt(t,e,n){var r=J?Map:n?q:Z,n=n||function(t){return t},i=[],o=[],s=[],a=t.map(n),n=e.map(n),u=new r,c=new r,l=[],f=[],h={},d=[],p=0,v=0;return a.forEach(function(t,e){u.set(t,e)}),n.forEach(function(t,e){c.set(t,e)}),a.forEach(function(t,e){t=c.get(t);void 0===t?(++v,o.push(e)):h[t]=v}),n.forEach(function(t,e){t=u.get(t);void 0===t?(i.push(e),++p):(s.push([t,e]),v=h[e]||0,l.push([t-v,e-p]),f.push(e===t),t!==e&&d.push([t,e]))}),o.reverse(),new Q(t,e,i,o,d,s,l,f)}var et=function(t,e){return(et=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)};function a(t,e){function n(){this.constructor=t}et(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function nt(t,e){var n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function c(t,e){if(t!==e){for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0}return!1}function P(n,r){var i=Object.keys(n),e=Object.keys(r),t=tt(i,e,function(t){return t}),o={},s={},a={};return t.added.forEach(function(t){t=e[t];o[t]=r[t]}),t.removed.forEach(function(t){t=i[t];s[t]=n[t]}),t.maintained.forEach(function(t){var t=t[0],t=i[t],e=[n[t],r[t]];n[t]!==r[t]&&(a[t]=e)}),{added:o,removed:s,changed:a}}function rt(t){t.forEach(function(t){t()})}function it(t){var e=0;return t.map(function(t){return null==t?"$compat"+ ++e:""+t})}function ot(t,e,n,r){return y(t)||"number"==typeof t?new ut("text_"+t,e,n,r,null,{}):new("string"==typeof t.type?ct:t.type.prototype.render?ht:lt)(t.type,e,n,r,t.ref,t.props)}function st(t){var e=t.className,t=nt(t,["className"]);return null!=e&&(t.class=e),delete t.style,delete t.children,t}function l(t,e){if(e)for(var n in e)typeof t[n]===X&&(t[n]=e[n]);return t}function C(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var e=e||{},i=e.key,o=e.ref,e=nt(e,["key","ref"]);return{type:t,key:i,ref:o,props:s(s({},e),{children:function e(t){var n=[];return t.forEach(function(t){n=n.concat(L(t)?e(t):t)}),n}(n).filter(function(t){return null!=t&&!1!==t})})}}var t=function(){function t(t,e,n,r,i,o){void 0===o&&(o={}),this.type=t,this.key=e,this.index=n,this.container=r,this.ref=i,this.props=o,this._providers=[]}var e=t.prototype;return e._should=function(t,e){return!0},e._update=function(t,e,n,r){if(this.base&&!y(e)&&!r&&!this._should(e.props,n))return!1;this.original=e,this._setState(n);r=this.props;return y(e)||(this.props=e.props,this.ref=e.ref),this._render(t,this.base?r:{},n),!0},e._mounted=function(){var t=this.ref;t&&t(this.base)},e._setState=function(t){},e._updated=function(){var t=this.ref;t&&t(this.base)},e._destroy=function(){var t=this.ref;t&&t(null)},t}();function at(t){var e,n={},r={};for(e in t)0===e.indexOf("on")?r[e.replace("on","").toLowerCase()]=t[e]:n[e]=t[e];return{attributes:n,events:r}}var ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}a(e,t);var n=e.prototype;return n._render=function(t){var e=this,n=!this.base;return n&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push(function(){n?e._mounted():e._updated()}),!0},n._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(t),ct=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.events={},t._isSVG=!1,t}a(t,e);var n=t.prototype;return n.addEventListener=function(t,e){var n=this.events;n[t]=function(t){t.nativeEvent=t,e(t)},this.base.addEventListener(t,n[t])},n.removeEventListener=function(t){var e=this.events;this.base.removeEventListener(t,e[t]),delete e[t]},n._should=function(t){return c(this.props,t)},n._render=function(t,e){var n,r=this,i=!this.base,o=(i&&(o=this._hasSVG(),this._isSVG=o,(a=this.props.portalContainer)||(s=this.type,a=o?document.createElementNS("http://www.w3.org/2000/svg",s):document.createElement(s)),this.base=a),S(this,this._providers,this.props.children,t,null),this.base),s=at(e),a=s.attributes,s=s.events,u=at(this.props),c=u.attributes,u=u.events,a=st(a),c=st(c),l=o,f=(a=P(a,c)).added,c=a.removed,h=a.changed;for(n in f)l.setAttribute(n,f[n]);for(n in h)l.setAttribute(n,h[n][1]);for(n in c)l.removeAttribute(n);var d,c=s,p=this,v=(c=P(c,s=u)).added,s=c.removed,g=c.changed;for(d in s)p.removeEventListener(d);for(d in v)p.addEventListener(d,v[d]);for(d in g)p.removeEventListener(d),p.addEventListener(d,g[d][1]);for(d in s)p.removeEventListener(d);var m,u=e.style||{},c=this.props.style||{},e=o,y=e.style,b=(e=P(u,c)).added,u=e.removed,_=e.changed;for(m in b){var E=x(m,"-");y.setProperty?y.setProperty(E,b[m]):y[E]=b[m]}for(m in _){E=x(m,"-");y.setProperty?y.setProperty(E,_[m][1]):y[E]=_[m][1]}for(m in u){E=x(m,"-");y.removeProperty?y.removeProperty(E):y[E]=""}return t.push(function(){i?r._mounted():r._updated()}),!0},n._unmount=function(){var t,e=this.events,n=this.base;for(t in e)n.removeEventListener(t,e[t]);this._providers.forEach(function(t){t._unmount()}),this.events={},this.props.portalContainer||n.parentNode.removeChild(n)},n._hasSVG=function(){var t;return!(!this._isSVG&&"svg"!==this.type)||(t=f(this.container))&&"ownerSVGElement"in t},t}(t);function f(t){var e;return t?(e=t.base)instanceof Node?e:f(t.container):null}function d(t){return t?t instanceof Node?t:(t=t.$_provider._providers).length?d(t[0].base):null:null}var lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}a(e,t);var n=e.prototype;return n._render=function(t){var e=this.type(this.props);return S(this,this._providers,e?[e]:[],t),!0},n._unmount=function(){this._providers.forEach(function(t){t._unmount()})},e}(t),ft=function(n){function t(t){var e=n.call(this,"container","container",0,null)||this;return e.base=t,e}a(t,n);var e=t.prototype;return e._render=function(){return!0},e._unmount=function(){},t}(t),ht=function(s){function t(t,e,n,r,i,o){return s.call(this,t,e,n,r,i,l(o=void 0===o?{}:o,t.defaultProps))||this}a(t,s);var e=t.prototype;return e._should=function(t,e){return this.base.shouldComponentUpdate(l(t,this.type.defaultProps),e||this.base.state)},e._render=function(t,e,n){var r=this,i=(this.props=l(this.props,this.type.defaultProps),!this.base),o=(i?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props,this.base),s=o.state,a=o.render();a&&a.props&&!a.props.children.length&&(a.props.children=this.props.children),S(this,this._providers,a?[a]:[],t,n,null),t.push(function(){i?(r._mounted(),o.componentDidMount()):(r._updated(),o.componentDidUpdate(e,s))})},e._setState=function(t){var e=this.base;e&&t&&(e.state=t)},e._unmount=function(){this._providers.forEach(function(t){t._unmount()}),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},t}(t),t=function(){function t(t){this.props=t=void 0===t?{}:t,this.state={},this.$_timer=0,this.$_state={}}var e=t.prototype;return e.shouldComponentUpdate=function(t,e){return!0},e.render=function(){return null},e.setState=function(t,e,n){var r=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=s(s({},this.$_state),t),n?this.$_setState(e,n):this.$_timer=setTimeout(function(){r.$_timer=0,r.$_setState(e,n)})},e.forceUpdate=function(t){this.setState({},t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},e.$_setState=function(t,e){var n=[],r=this.$_provider;S(r.container,[r],[r.original],n,s(s({},this.state),this.$_state),e)&&(t&&n.push(t),rt(n))},t}(),e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.shouldComponentUpdate=function(t,e){return c(this.props,t)||c(this.state,e)},e}(t),dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}a(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this.props,e=t.element,t=t.container;this._portalProvider=new ft(t),O(e,t,this._portalProvider)},n.componentDidUpdate=function(){var t=this.props;O(t.element,t.container,this._portalProvider)},n.componentWillUnmount=function(){O(null,this.props.container,this._portalProvider),this._portalProvider=null},e}(e);function pt(r,i,o){var s=o.map(function(t){return y(t)?null:t.key}),t=tt(it(i.map(function(t){return t.key})),it(s),function(t){return t}),e=(t.removed.forEach(function(t){i.splice(t,1)[0]._unmount()}),t.ordered.forEach(function(t){var e=t[0],t=t[1],e=i.splice(e,1)[0],e=(i.splice(t,0,e),d(e.base)),t=d(i[t+1]&&i[t+1].base);e&&e.parentNode.insertBefore(e,t)}),t.added.forEach(function(t){i.splice(t,0,ot(o[t],s[t],t,r))}),t.maintained.filter(function(t){t[0];var t=t[1],e=o[t],n=i[t];return(y(e)?"text_"+e:e.type)!==n.type?(n._unmount(),i.splice(t,1,ot(e,s[t],t,r)),!0):(n.index=t,!1)}));return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}(t.added,e.map(function(t){t[0];return t[1]}))}function S(n,r,i,o,s,a){var t=pt(n,r,i),e=r.filter(function(t,e){return t._update(o,i[e],s,a)}),u=f(n);return u&&t.reverse().forEach(function(t){var t=r[t],e=d(t.base);e&&u!==e&&!e.parentNode&&(t=function(t,e){for(var n=t._providers,r=n.length,i=e.index+1;i<r;++i){var o=d(n[i].base);if(o)return o}return null}(n,t),u.insertBefore(e,t))}),0<e.length}function O(t,e,n){var r,i,o=!!(n=void 0===n?e.__REACT_COMPAT__:n);n=n||new ft(e),t=t?[t]:[],i=[],S(n,n._providers,t,i,r),rt(i),o||(e.__REACT_COMPAT__=n)}function vt(t,e,n){var r=e.__REACT_COMPAT__;t&&!r&&(e.innerHTML=""),O(t,e,r),n&&n()}var gt=function(t,e){return(gt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)};var mt=function(e){function t(){this.constructor=n}var n;function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={scrollPos:0},t.width=0,t.height=0,t}gt(n=r,i=e),n.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t);var i=r.prototype;return i.render=function(){return C("canvas",{ref:h(this,"canvasElement"),style:this.props.style})},i.componentDidMount=function(){var t=this.canvasElement.getContext("2d");this.canvasContext=t,this.resize()},i.componentDidUpdate=function(){this.resize()},i.scroll=function(t){this.draw(t)},i.resize=function(){var t=this.canvasElement,e=this.props,n=e.width,r=e.height,e=e.scrollPos;this.width=n||t.offsetWidth,this.height=r||t.offsetHeight,t.width=2*this.width,t.height=2*this.height,this.draw(e)},i.draw=function(t){void 0===t&&(t=this.state.scrollPos);for(var e=this.props,n=e.unit,r=e.zoom,i=e.type,o=e.backgroundColor,s=e.lineColor,a=e.textColor,u=e.direction,c=e.negativeRuler,c=void 0===c||c,l=e.segment,f=void 0===l?10:l,h=e.textFormat,l=e.range,d=void 0===l?[-1/0,1/0]:l,p=this.width,v=this.height,g=(this.state.scrollPos=t,this.canvasContext),m="horizontal"===i,y="start"===u,F=!1!==c,l=e.font||"10px sans-serif",b=e.textAlign||"left",_=e.textOffset||[0,0],i=m?v:p,Y=R(""+(e.mainLineSize||"100%"),i),X=R(""+(e.longLineSize||10),i),A=R(""+(e.shortLineSize||7),i),E=("transparent"===o?g.clearRect(0,0,2*p,2*v):(g.rect(0,0,2*p,2*v),g.fillStyle=o,g.fill()),g.save(),g.scale(2,2),g.strokeStyle=s,g.lineWidth=1,g.font=l,g.fillStyle=a,y&&(g.textBaseline="top"),g.translate(.5,0),g.beginPath(),m?p:v),x=r*n,P=Math.floor(t*r/x),L=Math.ceil((t*r+E)/x)-P,C=Math.max(["left","center","right"].indexOf(b)-1,-1),S=0;S<=L;++S){var O=S+P;if(F||!(O<0)){for(var w,D,G=O*n,j=(G-t)*r,M=0;M<f;++M){var T,k,N=j+M/f*x,z=G+M/f*n;N<0||E<=N||z<d[0]||z>d[1]||(z=0===M?Y:M%2==0?X:A,T=(N=m?[N,y?0:v-z]:[y?0:p-z,N])[0],N=N[1],k=(z=m?[T,N+z]:[T+z,N])[0],z=z[1],g.moveTo(T,N),g.lineTo(k,z))}j<-x||E+n*r<=j||G<d[0]||G>d[1]||(w=(O=m?[j+-3*C,y?17:v-17]:[y?17:p-17,j+3*C])[0],O=O[1],D=""+G,h&&(D=h(G)),g.textAlign=b,m?g.fillText(D,w+_[0],O+_[1]):(g.save(),g.translate(w+_[0],O+_[1]),g.rotate(-Math.PI/2),g.fillText(D,0,0),g.restore()))}}g.stroke(),g.restore()},r.defaultProps={type:"horizontal",zoom:1,width:0,height:0,unit:50,negativeRuler:!0,mainLineSize:"100%",longLineSize:10,shortLineSize:7,segment:10,direction:"end",style:{width:"100%",height:"100%"},backgroundColor:"#333333",font:"10px sans-serif",textColor:"#ffffff",lineColor:"#777777",range:[-1/0,1/0]},r}(e),yt=["type","width","height","unit","zoom","style","backgroundColor","lineColor","textColor","direction","textFormat","scrollPos","textAlign","mainLineSize","longLineSize","shortLineSize","negativeRuler","textOffset","font","segment"];function w(t,e,n){void 0===n&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,o=e.length/i;if(!i)return e;if(!o)return t;for(var s=0;s<n;++s)for(var a=0;a<o;++a)for(var u=r[a*n+s]=0;u<i;++u)r[a*n+s]+=t[u*n+s]*e[a*i+u];return r}function bt(t,e){return w(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function _t(t,e){return w(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function Et(t,e){return w(t,(t=e,e=4,n=Math.cos(t),t=Math.sin(t),(r=Pt(e))[0]=n,r[1]=t,r[e]=-t,r[e+1]=n,r));var n,r}function D(t,e){var n=e[0],r=e[1],e=e[2];return w(t,[void 0===n?1:n,0,0,0,0,void 0===r?1:r,0,0,0,0,void 0===e?1:e,0,0,0,0,1],4)}function G(t,e){var n=e[0],r=e[1],e=e[2];return w(t,[1,0,0,0,0,1,0,0,0,0,1,0,void 0===n?0:n,void 0===r?0:r,void 0===e?0:e,1],4)}function xt(t,e){return w(t,e,4)}function Pt(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function Ct(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function St(t){return t=(L(t=t)?t:function(t){return _(t,"")}(t)).map(function(t){var e,n,r,t=!(t=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t=t))||t.length<4?{}:{prefix:t[1],value:t[2],suffix:t[3]},i=t.prefix,t=t.value,o=null,s=i,a="";return"translate"===i||"translateX"===i||"translate3d"===i?(o=G,a=[(r=u(t).map(function(t){return parseFloat(t)}))[0],void 0===(e=r[1])?0:e,void 0===(e=r[2])?0:e]):"translateY"===i?(o=G,a=[0,parseFloat(t),0]):"translateZ"===i?(o=G,a=[0,0,parseFloat(t)]):"scale"===i||"scale3d"===i?(o=D,a=[n=(r=u(t).map(function(t){return parseFloat(t)}))[0],void 0===(e=r[1])?n:e,void 0===(e=r[2])?1:e]):"scaleX"===i?(o=D,a=[n=parseFloat(t),1,1]):"scaleY"===i?(o=D,a=[1,parseFloat(t),1]):"scaleZ"===i?(o=D,a=[1,1,parseFloat(t)]):"rotate"===i||"rotateZ"===i||"rotateX"===i||"rotateY"===i?(e=(r=I(t)).unit,n=r.value,"rotate"===i||"rotateZ"===i?(s="rotateZ",o=Et):"rotateX"===i?o=bt:"rotateY"===i&&(o=_t),a="rad"===e?n:n*Math.PI/180):"matrix3d"===i?(o=xt,a=u(t).map(function(t){return parseFloat(t)})):"matrix"===i?(o=xt,a=[(r=u(t).map(function(t){return parseFloat(t)}))[0],r[1],0,0,r[2],r[3],0,0,0,0,1,0,r[4],r[5],0,1]):s="",{name:i,functionName:s,value:t,matrixFunction:o,functionValue:a}}),n=Ct(),t.forEach(function(t){var e=t.matrixFunction,t=t.functionValue;e&&(n=e(n,t))}),n;var n}function Ot(t,e){n=t,e=[e[0],e[1]||0,e[2]||0,1],r=(n=w(t,e,t=void 0===(t=4)?e.length:t))[t-1];var n,r,e=n.map(function(t){return t/r}),t=e[3]||1;return[e[0]/t,e[1]/t,e[2]/t]}function wt(t,e){void 0===e&&(e=document.body);for(var n=t,r=Ct();n;){r=xt(St(getComputedStyle(n).transform),r);if(n===e)break;n=n.parentElement}return(r=function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=Pt(e),i=0;i<e;++i){var o=e*i+i;if(!F(n[o],z))for(var s=i+1;s<e;++s)if(n[e*i+s]){g=v=p=d=h=f=l=c=u=a=void 0;for(var a=n,u=r,c=i,l=s,f=e,h=0;h<f;++h){var d=c+h*f,p=l+h*f,v=a[d],g=u[d];a[d]=a[p],a[p]=v,u[d]=u[p],u[p]=g}break}if(!F(n[o],z))return[];P=x=E=_=b=y=m=void 0;for(var m=n,y=r,b=i,_=e,E=n[o],x=0;x<_;++x){var P=b+x*_;m[P]/=E,y[P]/=E}for(s=0;s<e;++s){var C=s,S=n[s+i*e];if(F(S,z)&&i!==s){N=k=T=M=j=G=D=w=O=void 0;for(var O=n,w=r,D=C,G=i,j=e,M=-S,T=0;T<j;++T){var k=D+T*j,N=G+T*j;O[k]+=O[N]*M,w[k]+=w[N]*M}}}}return r}(r,4))[12]=0,r[13]=0,r[14]=0,r}function j(t){return void 0===t}var Dt=function(){var t=function(){function t(){this._eventHandler={},this.options={}}var e=t.prototype;return e.trigger=function(t,e){void 0===e&&(e={});var n=this._eventHandler[t]||[];if(!(0<n.length))return!0;n=n.concat(),e.eventType=t;var r=!1,i=[e],o=0;e.stop=function(){r=!0},e.currentTarget=this;for(var s=arguments.length,a=new Array(2<s?s-2:0),u=2;u<s;u++)a[u-2]=arguments[u];for(1<=a.length&&(i=i.concat(a)),o=0;n[o];o++)n[o].apply(this,i);return!r},e.once=function(i,o){if("object"==typeof i&&j(o)){var t,e=i;for(t in e)this.once(t,e[t])}else{var s;"string"==typeof i&&"function"==typeof o&&(s=this).on(i,function t(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];o.apply(s,n),s.off(i,t)})}return this},e.hasOn=function(t){return!!this._eventHandler[t]},e.on=function(t,e){if("object"==typeof t&&j(e)){var n,r=t;for(n in r)this.on(n,r[n])}else{var i;"string"==typeof t&&"function"==typeof e&&(j(i=this._eventHandler[t])&&(this._eventHandler[t]=[],i=this._eventHandler[t]),i.push(e))}return this},e.off=function(t,e){if(j(t))this._eventHandler={};else if(j(e))if("string"==typeof t)this._eventHandler[t]=void 0;else{var n,r=t;for(n in r)this.off(n,r[n])}else{var i=this._eventHandler[t];if(i)for(var o,s=0;void 0!==(o=i[s]);s++)if(o===e){i=i.splice(s,1);break}}return this},t}();return t.VERSION="2.1.2",t}(),Gt=function(t,e){return(Gt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)};var M=function(){return(M=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function jt(t){return 180*(e=[t[0].clientX,t[0].clientY],t=[t[1].clientX,t[1].clientY],n=t[0]-e[0],t=t[1]-e[1],(0<=(e=Math.atan2(t,n))?e:e+2*Math.PI)/Math.PI);var e,n}function Mt(t){if(t.touches){for(var e=t.touches,n=Math.min(e.length,2),r=[],i=0;i<n;++i)r.push(Nt(e[i]));return r}return[Nt(t)]}function Tt(t,e,n){var r=n.length,t=T(t,r),i=t.clientX,o=t.clientY,s=t.originalClientX,t=t.originalClientY,e=T(e,r),a=e.clientX,e=e.clientY,n=T(n,r);return{clientX:s,clientY:t,deltaX:i-a,deltaY:o-e,distX:i-n.clientX,distY:o-n.clientY}}function kt(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Nt(t){return{clientX:t.clientX,clientY:t.clientY}}function T(t,e){void 0===e&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<e;++r){var i=t[r];n.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,n.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,n.clientX+=i.clientX,n.clientY+=i.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var zt=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}var e=t.prototype;return e.addClients=function(t){void 0===t&&(t=this.prevClients);var e=this.getPosition(t),n=e.deltaX,r=e.deltaY;return this.movement+=Math.sqrt(n*n+r*r),this.prevClients=t,e},e.getAngle=function(t){return jt(t=void 0===t?this.prevClients:t)},e.getRotation=function(t){return jt(t=void 0===t?this.prevClients:t)-jt(this.startClients)},e.getPosition=function(t){return Tt(t||this.prevClients,this.prevClients,this.startClients)},e.getPositions=function(n){void 0===n&&(n=this.prevClients);var r=this.prevClients;return this.startClients.map(function(t,e){return Tt([n[e]],[r[e]],[t])})},e.getMovement=function(t){var e,n,r=this.movement;return t?(t=T(t,this.length),e=T(this.prevClients,this.length),n=t.clientX-e.clientX,t=t.clientY-e.clientY,Math.sqrt(n*n+t*t)+r):r},e.getDistance=function(t){return kt(t=void 0===t?this.prevClients:t)},e.getScale=function(t){return kt(t=void 0===t?this.prevClients:t)/kt(this.startClients)},e.move=function(e,n){this.startClients.forEach(function(t){t.clientX-=e,t.clientY-=n}),this.prevClients.forEach(function(t){t.clientX-=e,t.clientY-=n})},t}(),Ft=["textarea","input"],Yt=function(i){function t(){this.constructor=e}var e;function n(t,e){void 0===e&&(e={});var n,d=i.call(this)||this,t=(d.options={},d.flag=!1,d.pinchFlag=!1,d.datas={},d.isDrag=!1,d.isPinch=!1,d.isMouse=!1,d.isTouch=!1,d.clientStores=[],d.targets=[],d.prevTime=0,d.isDouble=!1,d.onDragStart=function(t,e){if(void 0===e&&(e=!0),d.flag||!1!==t.cancelable){var n=d.options,r=n.container,i=n.pinchOutside,o=n.preventRightClick,s=n.preventDefault,n=n.checkInput,a=d.isTouch,u=!d.flag;if(u){var c=document.activeElement,l=t.target,f=l.tagName.toLowerCase(),f=-1<Ft.indexOf(f),h=l.isContentEditable;if(f||h){if(n||c===l)return!1;if(c&&h&&c.isContentEditable&&c.contains(l))return!1}else(s||"touchstart"===t.type)&&c&&(f=c.tagName,c.isContentEditable||-1<Ft.indexOf(f))&&c.blur();if(d.clientStores=[new zt(Mt(t))],d.flag=!0,d.isDrag=!1,d.datas={},o&&(3===t.which||2===t.button))return d.initDrag(),!1;!1===d.trigger("dragStart",M({datas:d.datas,inputEvent:t,isTrusted:e},d.getCurrentStore().getPosition()))&&d.initDrag(),d.isDouble=H()-d.prevTime<200,d.flag&&s&&t.preventDefault()}if(!d.flag)return!1;n=0;u&&a&&i&&(n=setTimeout(function(){p(r,"touchstart",d.onDragStart,{passive:!1})})),!u&&a&&i&&v(r,"touchstart",d.onDragStart),d.flag&&(h=t).touches&&2<=h.touches.length&&(clearTimeout(n),u&&t.touches.length!==t.changedTouches.length||d.pinchFlag||d.onPinchStart(t))}},d.onDrag=function(t,e){var n,r;d.flag&&(n=Mt(t),r=d.moveClients(n,t,!1),(d.pinchFlag||r.deltaX||r.deltaY)&&d.trigger("drag",M({},r,{isScroll:!!e,inputEvent:t})),d.pinchFlag&&d.onPinch(t,n),d.getCurrentStore().addClients(n))},d.onDragEnd=function(t){var e,n,r;d.flag&&(e=(n=d.options).pinchOutside,n=n.container,d.isTouch&&e&&v(n,"touchstart",d.onDragStart),d.flag=!1,e=d.getCurrentStore().getPosition(),n=H(),r=!d.isDrag&&d.isDouble,d.prevTime=d.isDrag||r?0:n,d.trigger("dragEnd",M({datas:d.datas,isDouble:r,isDrag:d.isDrag,inputEvent:t},e)),d.pinchFlag&&d.onPinchEnd(t),d.clientStores=[])},[].concat(t)),e=(d.options=M({checkInput:!1,container:1<t.length?window:t[0],preventRightClick:!0,preventDefault:!0,pinchThreshold:0,events:["touch","mouse"]},e),d.options),r=e.container,e=e.events;return d.isTouch=-1<e.indexOf("touch"),d.isMouse=-1<e.indexOf("mouse"),d.targets=t,d.isMouse&&(t.forEach(function(t){p(t,"mousedown",d.onDragStart)}),p(r,"mousemove",d.onDrag),p(r,"mouseup",d.onDragEnd),p(r,"contextmenu",d.onDragEnd)),d.isTouch&&(n={passive:!1},t.forEach(function(t){p(t,"touchstart",d.onDragStart,n)}),p(r,"touchmove",d.onDrag,n),p(r,"touchend",d.onDragEnd,n),p(r,"touchcancel",d.onDragEnd,n)),d}Gt(e=n,r=i),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t);var r=n.prototype;return r.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce(function(t,e){return t+e.movement},0)},r.isDragging=function(){return this.isDrag},r.isFlag=function(){return this.flag},r.isPinchFlag=function(){return this.pinchFlag},r.isPinching=function(){return this.isPinch},r.scrollBy=function(t,e,n,r){void 0===r&&(r=!0),this.flag&&(this.clientStores[0].move(t,e),r)&&this.onDrag(n,!0)},r.move=function(t,e){var n=t[0],r=t[1],t=this.getCurrentStore().prevClients;return this.moveClients(t.map(function(t){var e=t.clientX,t=t.clientY;return{clientX:e+n,clientY:t+r,originalClientX:e,originalClientY:t}}),e,!0)},r.triggerDragStart=function(t){this.onDragStart(t,!1)},r.unset=function(){var e=this,t=this.targets,n=this.options.container;this.off(),this.isMouse&&(t.forEach(function(t){v(t,"mousedown",e.onDragStart)}),v(n,"mousemove",this.onDrag),v(n,"mouseup",this.onDragEnd),v(n,"contextmenu",this.onDragEnd)),this.isTouch&&(t.forEach(function(t){v(t,"touchstart",e.onDragStart)}),v(n,"touchstart",this.onDragStart),v(n,"touchmove",this.onDrag),v(n,"touchend",this.onDragEnd),v(n,"touchcancel",this.onDragEnd))},r.onPinchStart=function(t){var e=this.options.pinchThreshold;this.isDrag&&this.getMovement()>e||(e=new zt(Mt(t)),this.pinchFlag=!0,this.clientStores.splice(0,0,e),this.trigger("pinchStart",M({datas:this.datas,angle:e.getAngle(),touches:this.getCurrentStore().getPositions()},e.getPosition(),{inputEvent:t})))},r.onPinch=function(t,e){var n;!this.flag||!this.pinchFlag||e.length<2||(n=this.getCurrentStore(),this.isPinch=!0,this.trigger("pinch",M({datas:this.datas,movement:this.getMovement(e),angle:n.getAngle(e),rotation:n.getRotation(e),touches:n.getPositions(e),scale:n.getScale(e),distance:n.getDistance(e)},n.getPosition(e),{inputEvent:t})))},r.onPinchEnd=function(t){var e,n;this.pinchFlag&&(e=this.isPinch,this.isPinch=!1,this.pinchFlag=!1,n=this.getCurrentStore(),this.trigger("pinchEnd",M({datas:this.datas,isPinch:e,touches:n.getPositions()},n.getPosition(),{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1)},r.initDrag=function(){this.clientStores=[],this.pinchFlag=!1,this.flag=!1},r.getCurrentStore=function(){return this.clientStores[0]},r.moveClients=function(t,e,n){n=this.getCurrentStore()[n?"addClients":"getPosition"](t);return this.isDrag=!0,M({datas:this.datas},n,{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},n}(Dt);var Xt=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0};function At(t,e,n,r){var i,o=document.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",t),n.nonce&&o.setAttribute("nonce",n.nonce),o.innerHTML=(i=t,t=e,n.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/gm,function(t,e){e=e.trim();return(e?u(e):[""]).map(function(t){t=t.trim();return 0===t.indexOf("@")?t:-1<t.indexOf(":global")?t.replace(/\:global/g,""):-1<t.indexOf(":host")?""+t.replace(/\:host/g,"."+i):t?"."+i+" "+t:"."+i}).join(", ")+" {"})),(r||document.head||document.body).appendChild(o),o}function Lt(o){var s,a="rCS"+Xt(o).toString(36),u=0;return{className:a,inject:function(t,e){void 0===e&&(e={});var n,r=function(t){if(t&&t.getRootNode){t=t.getRootNode();if(11===t.nodeType)return t}}(t),i=0===u;return(r||i)&&(n=At(a,o,e,r)),i&&(s=n),r||++u,{destroy:function(){r?(t.removeChild(n),n=null):(0<u&&--u,0===u&&s&&(s.parentNode.removeChild(s),s=null))}}}}}var Rt=function(t,e){return(Rt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)};function $t(t,e){function n(){this.constructor=t}Rt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var It=function(){return(It=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Dt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.injectResult=null,t.tag="div",t}$t(t,e);var n=t.prototype;return n.render=function(){var t=this.props,e=t.className,e=void 0===e?"":e,n=(t.cspNonce,t.portalContainer),t=function(t,e){var n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}(t,["className","cspNonce","portalContainer"]),r=this.injector.className,i=this.tag,o={};return-1<"simple-1.1.0".indexOf("simple")&&n&&(o={portalContainer:n}),C(i,It({ref:h(this,"element"),"data-styled-id":r,className:e+" "+r},o,t))},n.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},n.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},n.getElement=function(){return this.element},t}(t);function k(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.map(function(t){return t.split(" ").map(function(t){return t?""+e+t:""}).join(" ")}).join(" ")}.apply(void 0,m(["scena-"],t))}k("ruler");var Ht,Ut,Wt,Bt=k("guide","adder"),Vt=k("guides"),Zt=k("guide"),qt=k("dragging"),Jt=k("display-drag"),Kt=(Ht="scena-","\n{\n    position: relative;\n    width: 100%;\n    height: 100%;\n}\ncanvas {\n    position: relative;\n}\n.guide-origin {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    top: 0;\n    left: 0;\n    opacity: 0;\n}\n.guides {\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    will-change: transform;\n    z-index: 2000;\n}\n.guide-pos {\n    position: absolute;\n    font-weight: bold;\n    font-size: 12px;\n    color: #E04169;\n    width: 50px;\n    text-align: center;\n    backdrop-filter: blur(20px);\n}\n\n.horizontal .guide-pos {\n    bottom: 100%;\n    left: 50%;\n    transform: translate(-50%);\n}\n.vertical .guide-pos {\n    left: calc(100% + 2px);\n    top: 10px;\n    transform: translateY(-50%);\n}\n.display-drag {\n    position: absolute;\n    z-index: 2000;\n    font-weight: bold;\n    font-size: 12px;\n    display: block;\n    color: #E04169;\n    backdrop-filter: blur(20px);\n}\n\n.horizontal .display-drag {\n    bottom: 100%;\n    left: 15px\n    transform: translate(-50%);\n}\n\n.vertical .display-drag {\n    left: calc(100% + 2px);\n    top: 10px;\n    transform: translateY(-50%);\n}\n\n:host.horizontal .guides {\n    width: 100%;\n    height: 0;\n}\n:host.vertical .guides {\n    height: 100%;\n    width: 0;\n}\n.guide {\n    position: absolute;\n    background: #f33;\n    z-index: 2;\n}\n.selected {\n    background: #8169FF;\n}\n.guide.dragging:before {\n    position: absolute;\n    content: \"\";\n    width: 100%;\n    height: 100%;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n}\n:host.horizontal .guide {\n    width: 100%;\n    height: 1px;\n    cursor: row-resize;\n}\n:host.vertical .guide {\n    width: 1px;\n    height: 100%;\n    cursor: col-resize;\n}\n:host.horizontal .dragging,\n:host.horizontal .selected {\n    height: 2px\n}\n:host.vertical .dragging,\n:host.vertical .selected {\n    width: 2px\n}\n.mobile :host.horizontal .guide {\n    transform: scale(1, 2);\n}\n.mobile :host.vertical .guide {\n    transform: scale(2, 1);\n}\n:host.horizontal .guide:before {\n    height: 10px;\n    margin-top: -5px;\n    display: block;\n    content: '';\n}\n:host.vertical .guide:before {\n    width: 10px;\n    height: 100%;\n    margin-left: -5px;\n    display: block;\n    content: '';\n}\n.adder {\n    display: none;\n}\n.adder.dragging {\n    display: block;\n}\n".replace(/([^}{]*){/gm,function(t,e){return e.replace(/\.([^{,\s\d.]+)/g,"."+Ht+"$1")+"{"})),Qt=m(["className","rulerStyle","snapThreshold","snaps","displayDragPos","cspNonce","dragPosFormat","defaultGuides","showGuides"],yt),te=["getGuides","loadGuides","scroll","scrollGuides","resize","deleteSelectedGuide","resetSelected","clearAllGuides"],ee=["changeGuides","dragStart","drag","dragEnd","clickRuler","deleteGuide","addGuide","resetGuides"],ne=(Ut="div",Wt=Lt(Kt),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.injector=Wt,t.tag=Ut,t}return $t(t,e),t}(Dt)),re=function(e){function t(t){var v=e.call(this,t)||this;return v.state={guides:[],selectedGuides:[]},v.scrollPos=0,v.guideElements=[],v._isFirstMove=!1,v.onDragStart=function(t){v.resetSelected(),v.props.onDragStart(t),v._isFirstMove=!0},v.onDrag=function(t){v._isFirstMove&&(v._isFirstMove=!1,n=t.datas.target,e=qt,n.classList?n.classList.add(e):n.className+=" "+e);var e,n=v.movePos(t);return v.props.onDrag(g(g({},t),{dragElement:t.datas.target})),n},v.onDragEnd=function(t){var e=t.datas,n=t.isDrag,r=t.distX,i=t.distY;if(n){var n=v.movePos(t),o=v.state.guides,s=v.props,a=s.onChangeGuides,u=s.onAddGuide,c=s.zoom,l=s.displayDragPos,f=s.digit,s=s.lockGuides,h=parseFloat((n/c).toFixed(f||0));if(l&&(v.displayElement.style.cssText+="display: none;"),n=e.target,c=qt,n.classList?n.classList.remove(c):(c=new RegExp("(\\s|^)"+c+"(\\s|$)"),n.className=n.className.replace(c," ")),v.props.onDragEnd(g(g({},t),{dragElement:e.target})),e.fromRuler)v._isFirstMove&&v.props.onClickRuler(g(g({},t),{pos:0})),h>=v.scrollPos&&o.indexOf(h)<0&&v.setState({guides:m(o,[h])},function(){a({guides:v.state.guides,distX:r,distY:i,isAdd:!0,isRemove:!1,isChange:!1}),u({posNewGuide:h})});else{var f=e.target.getAttribute("data-index"),d=!1,p=!1,o=m(o);if(h<v.scrollPos){if(s&&(!0===s||-1<s.indexOf("remove")))return;l=o[f];o.splice(f,1),v.props.onDeleteGuide({deletedIndexGuide:f,deletedPosGuide:l}),d=!0}else{if(-1<o.indexOf(h))return;if(s&&(!0===s||-1<s.indexOf("change")))return;o[f]=h,p=!0}v.setState({guides:o},function(){var t=v.state.guides;a({distX:r,distY:i,guides:t,isAdd:!1,isChange:p,isRemove:d})})}}},window.addEventListener("keydown",function(t){"Backspace"===t.code&&v.state.selectedGuides.length&&v.deleteSelectedGuide()}),window.addEventListener("click",function(t){v.resetSelected(),t.stopPropagation()}),v}r(t,e);var n=t.prototype;return n.disablePointerEventsOnScroll=function(){var t,e=this;null!=(t=this.props)&&t.showGuides&&(this._pointerEventsTimer&&clearTimeout(this._pointerEventsTimer),this.guidesElement.style.pointerEvents="none",this._pointerEventsTimer=setTimeout(function(){e.guidesElement.style.pointerEvents="auto"},300))},n.render=function(){var t=this.props,e=t.className,n=t.type,r=t.zoom,i=t.style,o=t.rulerStyle,s=t.displayDragPos,a=t.cspNonce,u=t.dragGuideStyle,t=t.portalContainer,c=this.props,l=this.getTranslateName(),f={};return yt.forEach(function(t){"style"!==t&&(f[t]=c[t])}),C(ne,{ref:h(this,"manager"),cspNonce:a,className:k("manager",n)+" "+e,portalContainer:t,style:i},C("div",{className:k("guide-origin"),ref:h(this,"originElement")}),C(mt,g({ref:h(this,"ruler"),style:o},f)),C("div",{className:Vt,ref:h(this,"guidesElement"),style:{transform:l+"("+-this.scrollPos*r+"px)"}},s&&C("div",{className:Jt,ref:h(this,"displayElement"),style:u}),C("div",{className:Bt,ref:h(this,"adderElement")}),this.renderGuides()))},n.selectGuide=function(t,e){this.setState({selectedGuides:[t]}),e.stopPropagation(),e.preventDefault()},n.renderGuides=function(){var o=this,t=this.props,s=t.type,a=t.zoom,e=t.showGuides,u=t.guideStyle,c=t.displayGuidePos,n=t.guidePosStyle,l=void 0===n?{}:n,f=this.getTranslateName(),n=this.state.guides,h=t.guidePosFormat||t.dragPosFormat||function(t){return t},d=this.state.selectedGuides;if(this.guideElements=[],e)return n.map(function(e,t){return C("div",{className:k("guide",s)+" "+(d.includes(e)?k("selected"):""),ref:(n=o,r="guideElements",function(t){t&&(n[r][i]=t)}),key:i=t,"data-index":t,"data-pos":e,onClick:function(t){return o.selectGuide(e,t)},style:g(g({},u),{transform:f+"("+e*a+"px) translateZ(0px)"})},c&&C("div",{className:k("guide-pos"),style:l||{}},h(e)));var n,r,i})},n.componentDidMount=function(){var l=this;this.gesto=new Yt(this.manager.getElement(),{container:document.body}).on("dragStart",function(t){var e=l.props,n=e.type,r=e.zoom,e=e.lockGuides;if(!0===e)t.stop();else{var i=t.inputEvent.target,o=t.datas,s=l.ruler.canvasElement,a=l.guidesElement,n="horizontal"===n,u=l.originElement.getBoundingClientRect(),c=wt(l.manager.getElement()),u=Ot(c,[t.clientX-u.left,t.clientY-u.top]),a=(u[0]-=a.offsetLeft,u[1]-=a.offsetTop,u[n?1:0]+=l.scrollPos*r,o.offsetPos=u,o.matrix=c,e&&-1<e.indexOf("add")),n=e&&-1<e.indexOf("remove"),r=e&&-1<e.indexOf("change");if(i===s){if(a)return void t.stop();o.fromRuler=!0,o.target=l.adderElement}else{if(u=Zt,(c=i).classList?!c.classList.contains(u):!c.className.match(new RegExp("(\\s|^)"+u+"(\\s|$)")))return t.stop(),!1;if(n&&r)return void t.stop();o.target=i}l.onDragStart(t)}}).on("drag",this.onDrag).on("dragEnd",this.onDragEnd),this.setState({guides:this.props.defaultGuides||[]})},n.componentWillUnmount=function(){this.gesto.unset()},n.componentDidUpdate=function(t){t.defaultGuides!==this.props.defaultGuides&&this.setState({guides:this.props.defaultGuides||[]})},n.loadGuides=function(t){this.setState({guides:t})},n.deleteSelectedGuide=function(){var e=this,t=this.getGuides(),n=this.getGuides(),r=t.findIndex(function(t){if(e.state.selectedGuides.includes(t))return t});t.splice(r,1),this.setState({guides:t,selectedGuides:[]}),this.props.onDeleteGuide({deletedPosGuide:n[r],deletedIndexGuide:r})},n.clearAllGuides=function(){this.setState({guides:[]})},n.getGuides=function(){return this.state.guides},n.scrollGuides=function(n,t){void 0===t&&(t=1);var e=this.guidesElement,r=(this.disablePointerEventsOnScroll(),this.scrollPos=n,e.style.transform=this.getTranslateName()+"("+-n*t+"px)",this.state.guides);this.guideElements.forEach(function(t,e){t&&(t.style.display=-n+r[e]<0?"none":"block")})},n.resize=function(){this.ruler.resize()},n.scroll=function(t){this.ruler.scroll(t)},n.movePos=function(t){var e=t.datas,n=t.distX,t=t.distY,r=this.props,i=r.type,o=r.zoom,s=r.snaps,a=r.snapThreshold,u=r.displayDragPos,c=r.digit,r=r.dragPosFormat||function(t){return t},l="horizontal"===i,n=Ot(e.matrix,[n,t]),t=e.offsetPos,f=n[0]+t[0],n=n[1]+t[1],t=Math.round(l?n:f),h=parseFloat((t/o).toFixed(c||0)),l=s.slice().sort(function(t,e){return Math.abs(h-t)-Math.abs(h-e)});return l.length&&Math.abs(l[0]*o-t)<a&&(t=(h=l[0])*o),e.fromRuler&&this._isFirstMove||(u&&(c="horizontal"===i?[f,t]:[t,n],s="horizontal"===i?"translate("+c.map(function(t,e){return e?t+"px":"0px"}).join(", ")+")":"translate("+c.map(function(t,e){return e?"7px":t+"px"}).join(", ")+")",this.displayElement.style.cssText+="display: block;transform: translate(-50%, -50%) "+s,this.displayElement.innerHTML=""+r(h)),(a=e.target).setAttribute("data-pos",h),a.style.transform=this.getTranslateName()+"("+t+"px)"),t},n.getTranslateName=function(){return"horizontal"===this.props.type?"translateY":"translateX"},n.resetSelected=function(){this.setState({selectedGuides:[]})},t.defaultProps={className:"",type:"horizontal",zoom:1,style:{},snapThreshold:5,snaps:[],digit:0,onClickRuler:function(){},onAddGuide:function(){},onDeleteGuide:function(){},onChangeGuides:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},displayDragPos:!1,dragPosFormat:function(t){return t},defaultGuides:[],lockGuides:!1,showGuides:!0,guideStyle:{},dragGuideStyle:{},guidePosStyle:{},portalContainer:null},t}(e),ie=function(n){function t(t){var e=n.call(this,t)||this;return e.state={},e.state=g({},t),e}return r(t,n),t.prototype.render=function(){var t=this.state,e=t.container,t=function(t,e){var n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}(t,["container"]);return t=C(re,g({ref:h(this,"guides")},t)),C(dt,{element:t,container:e})},t}(t);return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(function(i){function t(t,e){void 0===e&&(e={});var n=i.call(this)||this,r=(n.tempElement=document.createElement("div"),{});return ee.forEach(function(e){r[("on "+e).replace(/[\s-_]([a-z])/g,function(t,e){return e.toUpperCase()})]=function(t){return n.trigger(e,t)}}),vt(C(ie,g({},e,r,{container:t,ref:h(n,"innerGuides")})),n.tempElement),n}r(t,i);var e=t.prototype;return e.setState=function(t,e){this.innerGuides.setState(t,e)},e.destroy=function(){vt(null,this.tempElement),this.tempElement=null,this.innerGuides=null},e.getInnerGuides=function(){return this.innerGuides.guides},function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(i=t[a])&&(s=(o<3?i(s):3<o?i(e,n,s):i(e,n))||s);return 3<o&&s&&Object.defineProperty(e,n,s),s}([V(te,function(t,r){t[r]||(t[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.getInnerGuides();if(n&&n[r])return n[r].apply(n,t)})}),V(Qt,function(t,n){Object.defineProperty(t,n,{get:function(){return this.getInnerGuides().props[n]},set:function(t){var e;this.innerGuides.setState(((e={})[n]=t,e))},enumerable:!0,configurable:!0})})],t)}(B))});
//# sourceMappingURL=guides.min.js.map
