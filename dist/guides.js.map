{"version":3,"file":"guides.js","sources":["../src/react-guides/utils.ts","../src/react-guides/consts.ts","../src/react-guides/Guides.tsx","../src/InnerGuides.tsx","../src/GuidesManager.tsx","../src/index.ts"],"sourcesContent":["import { prefixNames } from 'framework-utils';\n\nexport function prefix(...classNames: string[]) {\n    return prefixNames('scena-', ...classNames);\n}\n","import { PROPERTIES as RULER_PROPERTIES } from '@scena/react-ruler';\nimport { prefixCSS } from 'framework-utils';\n\nimport { GuidesOptions } from './types';\nimport { prefix } from './utils';\n\nexport const RULER = prefix('ruler');\nexport const ADDER = prefix('guide', 'adder');\nexport const GUIDES = prefix('guides');\nexport const GUIDE = prefix('guide');\nexport const DRAGGING = prefix('dragging');\nexport const DISPLAY_DRAG = prefix('display-drag');\nexport const GUIDES_CSS = prefixCSS('scena-', `\n{\n    position: relative;\n    width: 100%;\n    height: 100%;\n}\ncanvas {\n    position: relative;\n}\n.guide-origin {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    top: 0;\n    left: 0;\n    opacity: 0;\n}\n.guides {\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    will-change: transform;\n    z-index: 2000;\n}\n.guide-pos {\n    position: absolute;\n    font-weight: bold;\n    font-size: 12px;\n    color: #E04169;\n    width: 50px;\n    text-align: center;\n    backdrop-filter: blur(20px);\n}\n\n.horizontal .guide-pos {\n    bottom: 100%;\n    left: 50%;\n    transform: translate(-50%);\n}\n.vertical .guide-pos {\n    left: calc(100% + 2px);\n    top: 10px;\n    transform: translateY(-50%);\n}\n.display-drag {\n    position: absolute;\n    z-index: 2000;\n    font-weight: bold;\n    font-size: 12px;\n    display: block;\n    color: #E04169;\n    backdrop-filter: blur(20px);\n}\n\n.horizontal .display-drag {\n    bottom: 100%;\n    left: 15px\n    transform: translate(-50%);\n}\n\n.vertical .display-drag {\n    left: calc(100% + 2px);\n    top: 10px;\n    transform: translateY(-50%);\n}\n\n:host.horizontal .guides {\n    width: 100%;\n    height: 0;\n}\n:host.vertical .guides {\n    height: 100%;\n    width: 0;\n}\n.guide {\n    position: absolute;\n    background: #f33;\n    z-index: 2;\n}\n.selected {\n    background: #8169FF;\n}\n.guide.dragging:before {\n    position: absolute;\n    content: \"\";\n    width: 100%;\n    height: 100%;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n}\n:host.horizontal .guide {\n    width: 100%;\n    height: 1px;\n    cursor: row-resize;\n}\n:host.vertical .guide {\n    width: 1px;\n    height: 100%;\n    cursor: col-resize;\n}\n:host.horizontal .dragging,\n:host.horizontal .selected {\n    height: 2px\n}\n:host.vertical .dragging,\n:host.vertical .selected {\n    width: 2px\n}\n.mobile :host.horizontal .guide {\n    transform: scale(1, 2);\n}\n.mobile :host.vertical .guide {\n    transform: scale(2, 1);\n}\n:host.horizontal .guide:before {\n    height: 10px;\n    margin-top: -5px;\n    display: block;\n    content: '';\n}\n:host.vertical .guide:before {\n    width: 10px;\n    height: 100%;\n    margin-left: -5px;\n    display: block;\n    content: '';\n}\n.adder {\n    display: none;\n}\n.adder.dragging {\n    display: block;\n}\n`);\n\nexport const PROPERTIES: Array<keyof GuidesOptions> = [\n    'className',\n    'rulerStyle',\n    'snapThreshold',\n    'snaps',\n    'displayDragPos',\n    'cspNonce',\n    'dragPosFormat',\n    'defaultGuides',\n    'showGuides',\n    ...RULER_PROPERTIES,\n];\n\nexport const METHODS = [\n    'getGuides',\n    'loadGuides',\n    'scroll',\n    'scrollGuides',\n    'resize',\n    'deleteSelectedGuide',\n    'resetSelected',\n    'clearAllGuides',\n] as const;\n\nexport const EVENTS = [\n    'changeGuides',\n    'dragStart',\n    'drag',\n    'dragEnd',\n    'clickRuler',\n    'deleteGuide',\n    'addGuide',\n    'resetGuides',\n] as const;\n","import { addClass, hasClass, removeClass } from '@daybrush/utils';\nimport Ruler, { PROPERTIES as RULER_PROPERTIES, RulerProps } from '@scena/react-ruler';\nimport { calculateMatrixDist,getDistElementMatrix } from 'css-to-mat';\nimport { ref, refs } from 'framework-utils';\nimport Gesto, { OnDragEnd } from 'gesto';\nimport * as React from 'react';\nimport styled, { StyledElement } from 'react-css-styled';\n\nimport { ADDER, DISPLAY_DRAG, DRAGGING, GUIDE, GUIDES, GUIDES_CSS } from './consts';\nimport { GuidesInterface,GuidesProps, GuidesState, OnDragStart } from './types';\nimport { prefix } from './utils';\n\nconst GuidesElement = styled('div', GUIDES_CSS);\n\nexport default class Guides extends React.PureComponent<GuidesProps, GuidesState> implements GuidesInterface {\n    public static defaultProps: GuidesProps = {\n        className: '',\n        type: 'horizontal',\n        zoom: 1,\n        style: {},\n        snapThreshold: 5,\n        snaps: [],\n        digit: 0,\n        onClickRuler: () => { },\n        onAddGuide: () => { },        \n        onDeleteGuide: () => { },\n        onChangeGuides: () => { },\n        onDragStart: () => { },\n        onDrag: () => { },\n        onDragEnd: () => { },\n        displayDragPos: false,\n        dragPosFormat: v => v,\n        defaultGuides: [],\n        lockGuides: false,\n        showGuides: true,\n        guideStyle: {},\n        dragGuideStyle: {},\n        guidePosStyle: {},\n        portalContainer: null,\n    };\n    public state: GuidesState = {\n        guides: [],\n        selectedGuides: [],\n    };\n    public adderElement!: HTMLElement;\n    public scrollPos = 0;\n    public ruler!: Ruler;\n    private manager!: StyledElement<HTMLElement>;\n    private guidesElement!: HTMLElement;\n    private displayElement!: HTMLElement;\n    private originElement!: HTMLElement;\n    private gesto!: Gesto;\n    private guideElements: HTMLElement[] = [];\n    private _isFirstMove = false;\n    private _pointerEventsTimer: NodeJS.Timeout;\n\n    constructor(props: Required<GuidesProps>) {\n        super(props);\n        window.addEventListener('keydown', (e: KeyboardEvent) => {\n            if(e.code === 'Backspace' && this.state.selectedGuides.length) {\n                this.deleteSelectedGuide();\n            }\n        });\n\n        window.addEventListener('click', (e: MouseEvent) => {\n            this.resetSelected();\n            e.stopPropagation();\n        });\n    }\n\n    public disablePointerEventsOnScroll() {\n        if(!this.props?.showGuides) {\n            return;\n        }\n        this._pointerEventsTimer && clearTimeout(this._pointerEventsTimer);\n        this.guidesElement.style.pointerEvents = 'none';\n        this._pointerEventsTimer = setTimeout(() => {\n            this.guidesElement.style.pointerEvents = 'auto';\n        }, 300);\n    }\n\n    public render() {\n        const {\n            className,\n            type,\n            zoom,\n            style,\n            rulerStyle,\n            displayDragPos,\n            cspNonce,\n            dragGuideStyle,\n            portalContainer,\n        } = this.props as Required<GuidesProps>;\n        const props = this.props;\n        const translateName = this.getTranslateName();\n\n        const rulerProps: RulerProps = {};\n\n        RULER_PROPERTIES.forEach(name => {\n            if (name === 'style') {\n                return;\n            }\n            (rulerProps as any)[name] = props[name];\n        });\n        return <GuidesElement\n            ref={ref(this, 'manager')}\n            cspNonce={cspNonce}\n            className={`${prefix('manager', type)} ${className}`}\n            portalContainer={portalContainer}\n            style={style}\n        >\n            <div className={prefix('guide-origin')} ref={ref(this, 'originElement')}></div>\n            <Ruler\n                ref={ref(this, 'ruler')}\n                style={rulerStyle}\n                {...rulerProps}\n            />\n            <div className={GUIDES} ref={ref(this, 'guidesElement')} style={{\n                transform: `${translateName}(${-this.scrollPos * zoom}px)`,\n            }}>\n                {displayDragPos && <div className={DISPLAY_DRAG}\n                    ref={ref(this, 'displayElement')} style={dragGuideStyle} />}\n                <div className={ADDER} ref={ref(this, 'adderElement')} />\n                {this.renderGuides()}\n            </div>\n        </GuidesElement>;\n    }\n\n    private selectGuide(pos: number, e: React.MouseEvent<HTMLDivElement, MouseEvent>) {\n        this.setState({\n            selectedGuides: [pos],\n        });\n        e.stopPropagation();\n        e.preventDefault();\n    }\n\n    public renderGuides() {\n        const props = this.props;\n        const {\n            type,\n            zoom,\n            showGuides,\n            guideStyle,\n            displayGuidePos,\n            guidePosStyle = {},\n        } = props as Required<GuidesProps>;\n        const translateName = this.getTranslateName();\n        const guides = this.state.guides;\n        const guidePosFormat = props.guidePosFormat || props.dragPosFormat || (v => v);\n        const selectedGuides = this.state.selectedGuides;\n        this.guideElements = [];\n        if (showGuides) {\n            return guides.map((pos, i) => {\n                return (\n                    <div className={`${prefix('guide', type)} ${selectedGuides.includes(pos) ? prefix('selected') : ''}`}\n                        ref={refs(this, 'guideElements', i)}\n                        key={i}\n                        data-index={i}\n                        data-pos={pos}\n                        onClick={(e) => this.selectGuide(pos, e)}\n                        style={{\n                            ...guideStyle,\n                            transform: `${translateName}(${pos * zoom}px) translateZ(0px)`,\n                        }}>\n                            {displayGuidePos && <div className={prefix('guide-pos')} style={guidePosStyle || {}}>\n                                {guidePosFormat!(pos)}\n                            </div>}\n                        </div>\n                    );\n            });\n        }\n        return;\n    }\n    public componentDidMount() {\n        this.gesto = new Gesto(this.manager.getElement(), {\n            container: document.body,\n        }).on('dragStart', e => {\n            const {\n                type,\n                zoom,\n                lockGuides,\n            } = this.props;\n\n            if (lockGuides === true) {\n                e.stop();\n                return;\n            }\n            const inputEvent = e.inputEvent;\n            const target = inputEvent.target;\n            const datas = e.datas;\n            const canvasElement = this.ruler.canvasElement;\n            const guidesElement = this.guidesElement;\n            const isHorizontal = type === 'horizontal';\n            const originRect = this.originElement.getBoundingClientRect();\n            const matrix = getDistElementMatrix(this.manager.getElement());\n            const offsetPos = calculateMatrixDist(matrix, [\n                e.clientX - originRect.left,\n                e.clientY - originRect.top,\n            ]);\n            offsetPos[0] -= guidesElement.offsetLeft;\n            offsetPos[1] -= guidesElement.offsetTop;\n            offsetPos[isHorizontal ? 1 : 0] += this.scrollPos * zoom!;\n\n            datas.offsetPos = offsetPos;\n            datas.matrix = matrix;\n\n            const isLockAdd = lockGuides && lockGuides.indexOf('add') > -1;\n            const isLockRemove = lockGuides && lockGuides.indexOf('remove') > -1;\n            const isLockChange = lockGuides && lockGuides.indexOf('change') > -1;\n\n            if (target === canvasElement) {\n                if (isLockAdd) {\n                    e.stop();\n                    return;\n                }\n                datas.fromRuler = true;\n                datas.target = this.adderElement;\n                // add\n            } else if (hasClass(target, GUIDE)) {\n                if (isLockRemove && isLockChange) {\n                    e.stop();\n                    return;\n                }\n                datas.target = target;\n                // change\n            } else {\n                e.stop();\n                return false;\n            }\n            this.onDragStart(e as OnDragStart);\n        }).on('drag', this.onDrag).on('dragEnd', this.onDragEnd);\n        // pass array of guides on mount data to create gridlines or something like that in ui\n        this.setState({ guides: this.props.defaultGuides || [] });\n    }\n    public componentWillUnmount() {\n        this.gesto.unset();\n    }\n    public componentDidUpdate(prevProps: any) {\n        if (prevProps.defaultGuides !== this.props.defaultGuides) {\n            // to dynamically update guides from code rather than dragging guidelines\n            this.setState({ guides: this.props.defaultGuides || [] });\n        }\n    }\n    /**\n     * Load the current guidelines.\n     * @memberof Guides\n     * @instance\n     */\n    public loadGuides(guides: number[]) {\n        this.setState({\n            guides,\n        });\n    }\n\n    /**\n     * Delete the selected guideline.\n     * @memberof Guides\n     * @instance\n     */\n    public deleteSelectedGuide() {\n        const guides = this.getGuides();\n        const guidesClone = this.getGuides();\n        const index = guides.findIndex(guide => {\n            if(this.state.selectedGuides.includes(guide)) {\n                return guide;\n            }\n        });\n\n        guides.splice(index, 1);\n        \n        this.setState({\n            guides,\n            selectedGuides: [],\n        });\n        \n        this.props.onDeleteGuide!({\n            deletedPosGuide: guidesClone[index],\n            deletedIndexGuide: index,\n        });\n    }\n\n    /**\n     * Clear all guidelines\n     * @memberof Guides\n     * @instance\n     */\n    public clearAllGuides() {\n        this.setState({\n            guides: [],\n        });\n    }\n\n    /**\n     * Get current guidelines.\n     * @memberof Guides\n     * @instance\n     */\n    public getGuides(): number[] {\n        return this.state.guides;\n    }\n    /**\n     * Scroll the positions of the guidelines opposite the ruler.\n     * @memberof Guides\n     * @instance\n     */\n    public scrollGuides(pos: number, zoom = 1) {\n        const guidesElement = this.guidesElement;\n\n        this.disablePointerEventsOnScroll();\n\n        this.scrollPos = pos;\n        guidesElement.style.transform = `${this.getTranslateName()}(${-pos * zoom}px)`;\n\n        const guides = this.state.guides;\n        this.guideElements.forEach((el, i) => {\n            if (!el) {\n                return;\n            }\n            el.style.display = -pos + guides[i] < 0 ? 'none' : 'block';\n        });\n    }\n    /**\n     * Recalculate the size of the ruler.\n     * @memberof Guides\n     * @instance\n     */\n    public resize() {\n        this.ruler.resize();\n    }\n    /**\n     * Scroll the position of the ruler.\n     * @memberof Guides\n     * @instance\n     */\n    public scroll(pos: number) {\n        this.ruler.scroll(pos);\n    }\n\n    private onDragStart = (e: OnDragStart) => {\n        this.resetSelected();\n        this.props.onDragStart(e);\n        this._isFirstMove = true;\n    }\n\n    private onDrag = (e: any) => { \n        if (this._isFirstMove) {\n            this._isFirstMove = false;\n            addClass(e.datas.target, DRAGGING);\n        }\n        const nextPos = this.movePos(e);\n\n        /**\n         * When dragging, the drag event is called.\n         * @memberof Guides\n         * @event drag\n         * @param {OnDrag} - Parameters for the drag event\n         */\n        this.props.onDrag!({\n            ...e,\n            dragElement: e.datas.target,\n        });\n        return nextPos;\n    }\n    private onDragEnd = (e: OnDragEnd) => {\n        const { datas, isDrag, distX, distY } = e;\n\n        if(!isDrag) {\n            return;\n        }\n\n        const pos = this.movePos(e);\n        let guides = this.state.guides;\n        const { onChangeGuides, onAddGuide, zoom, displayDragPos, digit, lockGuides } = this.props;\n        const guidePos = parseFloat((pos / zoom!).toFixed(digit || 0));\n\n        if (displayDragPos) {\n            this.displayElement.style.cssText += 'display: none;';\n        }\n\n        removeClass(datas.target, DRAGGING);\n        /**\n         * When the drag finishes, the dragEnd event is called.\n         * @memberof Guides\n         * @event dragEnd\n         * @param {OnDragEnd} - Parameters for the dragEnd event\n         */\n         this.props.onDragEnd!({\n            ...e,\n            dragElement: datas.target,\n        });\n        if (datas.fromRuler) {\n            if (this._isFirstMove) {\n                /**\n                 * When click the ruler, the click ruler is called.\n                 * @memberof Guides\n                 * @event clickRuler\n                 * @param {OnClickRuler} - Parameters for the clickRuler event\n                 */\n                this.props.onClickRuler!({\n                    ...e,\n                    pos: 0,\n                });\n            }\n            if (guidePos >= this.scrollPos && guides.indexOf(guidePos) < 0) {\n                this.setState({\n                    guides: [...guides, guidePos],\n                }, () => {\n                    /**\n                     * The `changeGuides` event occurs when the guideline is added / removed / changed.\n                     * @memberof Guides\n                     * @event changeGuides\n                     * @param {OnChangeGuides} - Parameters for the changeGuides event\n                     */\n                    onChangeGuides!({\n                        guides: this.state.guides,\n                        distX,\n                        distY,\n                        isAdd: true,\n                        isRemove: false,\n                        isChange: false,\n                    });\n\n                    onAddGuide!({\n                        posNewGuide: guidePos,\n                    });\n                });\n            }\n        } else {\n            const index = datas.target.getAttribute('data-index');\n            let isRemove = false;\n            let isChange = false;\n\n            guides = [...guides];\n\n            if (guidePos < this.scrollPos) {\n                if (lockGuides && (lockGuides === true || lockGuides.indexOf('remove') > -1)) {\n                    return;\n                }\n                const deletedPosGuide = guides[index];\n                guides.splice(index, 1);\n                this.props.onDeleteGuide!({\n                    deletedIndexGuide: index,\n                    deletedPosGuide,\n                });\n                isRemove = true;\n            } else if (guides.indexOf(guidePos) > -1) {\n                return;\n            } else {\n                if (lockGuides && (lockGuides === true || lockGuides.indexOf('change') > -1)) {\n                    return;\n                }\n                guides[index] = guidePos;\n                isChange = true;\n            }\n            this.setState({\n                guides,\n            }, () => {\n                const nextGuides = this.state.guides;\n                onChangeGuides!({\n                    distX,\n                    distY,\n                    guides: nextGuides,\n                    isAdd: false,\n                    isChange,\n                    isRemove,\n                });\n            });\n        }\n    }\n    private movePos(e: any) {\n        const { datas, distX, distY } = e;\n        const props = this.props;\n        const {\n            type, zoom, snaps, snapThreshold,\n            displayDragPos,\n            digit,\n        } = props;\n        const dragPosFormat = props.dragPosFormat || (v => v);\n        const isHorizontal = type === 'horizontal';\n        const matrixPos = calculateMatrixDist(datas.matrix, [distX, distY]);\n        const offsetPos = datas.offsetPos;\n        const offsetX = matrixPos[0] + offsetPos[0];\n        const offsetY = matrixPos[1] + offsetPos[1];\n        let nextPos = Math.round(isHorizontal ? offsetY : offsetX);\n        let guidePos = parseFloat((nextPos / zoom!).toFixed(digit || 0));\n        const guideSnaps = snaps!.slice().sort((a, b) => {\n            return Math.abs(guidePos - a) - Math.abs(guidePos - b);\n        });\n\n        if (guideSnaps.length && Math.abs(guideSnaps[0] * zoom! - nextPos) < snapThreshold!) {\n            guidePos = guideSnaps[0];\n            nextPos = guidePos * zoom!;\n        }\n        if (!datas.fromRuler || !this._isFirstMove) {\n            if (displayDragPos) {\n                const displayPos = type === 'horizontal'\n                ? [offsetX, nextPos]\n                : [nextPos, offsetY];\n                const transform = type === 'horizontal' \n                    ? `translate(${displayPos.map((v, i) => !i ? '0px' : `${v}px` ).join(', ')})` \n                    : `translate(${displayPos.map((v, i) => !i ? `${v}px` : '7px' ).join(', ')})`;\n                this.displayElement.style.cssText += 'display: block;'\n                    + 'transform: translate(-50%, -50%) '\n                    + transform;\n                this.displayElement.innerHTML = `${dragPosFormat!(guidePos)}`;\n            }\n            const target = datas.target;\n\n            target.setAttribute('data-pos', guidePos);\n            target.style.transform = `${this.getTranslateName()}(${nextPos}px)`;\n        }\n\n        return nextPos;\n\n    }\n    private getTranslateName() {\n        return this.props.type === 'horizontal' ? 'translateY' : 'translateX';\n    }\n\n    public resetSelected() {\n        this.setState({\n            selectedGuides:[],\n        });\n    }\n}\n","import { ref } from 'framework-utils';\nimport * as React from 'react';\nimport { createPortal } from 'react-dom';\n\nimport ReactGuides from './react-guides';\nimport { GuidesOptions } from './react-guides/types';\n\nexport interface InnerGuidesProps extends GuidesOptions {\n    container?: HTMLElement;\n}\nexport default class InnerGuides extends React.Component<InnerGuidesProps, InnerGuidesProps> {\n    public state: InnerGuidesProps = {};\n    public guides: ReactGuides;\n    constructor(props: InnerGuidesProps) {\n        super(props);\n        this.state = { ...props };\n    }\n    public render() {\n        const { container, ...state } = this.state;\n        return createPortal(<ReactGuides ref={ref(this, 'guides')} {...state} />, container);\n    }\n}\n","import { camelize } from '@daybrush/utils';\nimport EventEmitter from '@scena/event-emitter';\nimport { Properties,ref } from 'framework-utils';\nimport * as React from 'react';\nimport { render } from 'react-dom';\n\nimport InnerGuides from './InnerGuides';\nimport { EVENTS,METHODS, PROPERTIES } from './react-guides/consts';\nimport { GuidesEvents, GuidesInterface, GuidesOptions } from './react-guides/types';\n\n@Properties(METHODS as any, (prototype, property) => {\n    if (prototype[property]) {\n        return;\n    }\n    prototype[property] = function(...args) {\n        const self = this.getInnerGuides();\n\n        if (!self || !self[property]) {\n            return;\n        }\n        return self[property](...args);\n    };\n})\n@Properties(PROPERTIES, (prototype, property) => {\n    Object.defineProperty(prototype, property, {\n        get() {\n            return this.getInnerGuides().props[property];\n        },\n        set(value) {\n            this.innerGuides.setState({\n                [property]: value,\n            });\n        },\n        enumerable: true,\n        configurable: true,\n    });\n})\n/**\n * @sort 1\n * @extends EventEmitter\n */\nclass Guides extends EventEmitter<GuidesEvents> {\n    private tempElement = document.createElement('div');\n    private innerGuides!: InnerGuides;\n    /**\n     * @sort 1\n     * @param - guides' container\n     * @param {$ts:Partial<Guides.GuidesOptions>} - guides' options\n     */\n    constructor(container: HTMLElement, options: Partial<GuidesOptions> = {}) {\n        super();\n        const events: any = {};\n\n        EVENTS.forEach(name => {\n            events[camelize(`on ${name}`)] = (e: any) => this.trigger(name as any, e);\n        });\n\n        render(\n            <InnerGuides  {...options} {...events} container={container} ref={ref(this, 'innerGuides')} />,\n            this.tempElement,\n        );\n    }\n    /**\n     * @param state\n     * @param callback\n     */\n    public setState(state: Partial<GuidesOptions>, callback?: () => void) {\n        this.innerGuides.setState(state, callback);\n    }\n    /**\n     * destroy guides\n     */\n    public destroy() {\n        render(null, this.tempElement);\n        this.tempElement = null;\n        this.innerGuides = null;\n    }\n    private getInnerGuides() {\n        return this.innerGuides.guides;\n    }\n}\ninterface Guides extends GuidesInterface {}\n\nexport default Guides;\n","import GuidesManager from './GuidesManager';\n\nexport * from './react-guides/types';\nexport default class Guides extends GuidesManager {}\n\n"],"names":["prefix","_i","classNames","prefixNames","RULER","ADDER","GUIDES","GUIDE","DRAGGING","DISPLAY_DRAG","GUIDES_CSS","prefixCSS","PROPERTIES","RULER_PROPERTIES","METHODS","EVENTS","GuidesElement","styled","__extends","props","_super","_this","guides","selectedGuides","e","resetSelected","onDragStart","_isFirstMove","addClass","datas","target","nextPos","movePos","onDrag","dragElement","isDrag","distX","distY","pos","state","_a","onChangeGuides","onAddGuide","zoom","displayDragPos","digit","lockGuides","guidePos","parseFloat","toFixed","displayElement","style","cssText","removeClass","onDragEnd","fromRuler","onClickRuler","scrollPos","indexOf","setState","isAdd","isRemove","isChange","posNewGuide","index","getAttribute","isRemove_1","isChange_1","deletedPosGuide","splice","onDeleteGuide","deletedIndexGuide","nextGuides","window","addEventListener","code","length","deleteSelectedGuide","stopPropagation","showGuides","_pointerEventsTimer","clearTimeout","guidesElement","pointerEvents","setTimeout","className","type","rulerStyle","cspNonce","dragGuideStyle","portalContainer","translateName","getTranslateName","rulerProps","forEach","name","React","ref","Ruler","transform","renderGuides","preventDefault","guideStyle","displayGuidePos","_b","guidePosStyle","guidePosFormat","dragPosFormat","v","guideElements","map","i","includes","refs","key","onClick","selectGuide","gesto","Gesto","manager","getElement","container","document","body","on","stop","inputEvent","canvasElement","ruler","isHorizontal","originRect","originElement","getBoundingClientRect","matrix","getDistElementMatrix","offsetPos","calculateMatrixDist","clientX","left","clientY","top","offsetLeft","offsetTop","isLockAdd","isLockRemove","isLockChange","adderElement","hasClass","defaultGuides","unset","prevProps","getGuides","guidesClone","findIndex","guide","disablePointerEventsOnScroll","el","display","resize","scroll","snaps","snapThreshold","matrixPos","offsetX","offsetY","Math","round","guideSnaps","slice","sort","a","b","abs","displayPos","join","innerHTML","setAttribute","Guides","createPortal","ReactGuides","options","createElement","events","camelize","trigger","render","InnerGuides","tempElement","callback","innerGuides","Properties","prototype","property","args","self","getInnerGuides","Object","defineProperty","get","set","value","enumerable","configurable","EventEmitter","GuidesManager"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}